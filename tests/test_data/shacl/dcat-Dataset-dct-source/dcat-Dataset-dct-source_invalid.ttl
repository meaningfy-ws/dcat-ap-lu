@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dct:  <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ex:   <http://example.org/> .

# Shared required supporting nodes
ex:publisher-1 a foaf:Agent ;
  foaf:name "Example publisher"@en .

ex:rights-1 a dct:RightsStatement .

# A helper distribution template (each distribution still needs rights + typed accessURL)
ex:dist-201 a dcat:Distribution ; dct:rights ex:rights-1 ; dcat:accessURL "http://example.org/download/dataset-201"^^rdfs:Resource .
ex:dist-202 a dcat:Distribution ; dct:rights ex:rights-1 ; dcat:accessURL "http://example.org/download/dataset-202"^^rdfs:Resource .
ex:dist-203 a dcat:Distribution ; dct:rights ex:rights-1 ; dcat:accessURL "http://example.org/download/dataset-203"^^rdfs:Resource .
ex:dist-204 a dcat:Distribution ; dct:rights ex:rights-1 ; dcat:accessURL "http://example.org/download/dataset-204"^^rdfs:Resource .
ex:dist-205 a dcat:Distribution ; dct:rights ex:rights-1 ; dcat:accessURL "http://example.org/download/dataset-205"^^rdfs:Resource .
ex:dist-206 a dcat:Distribution ; dct:rights ex:rights-1 ; dcat:accessURL "http://example.org/download/dataset-206"^^rdfs:Resource .

############################################################
# Invalid 1: WRONG CLASS (foaf:Document instead of dcat:Dataset)
############################################################
ex:dataset-source-wrong-class a dcat:Dataset ;
  dct:identifier  "dataset-201" ;
  dct:title       "Invalid source - wrong class"@en ;
  dct:description "dct:source points to a non-dataset."@en ;
  dct:publisher   ex:publisher-1 ;
  dct:rights      ex:rights-1 ;
  dcat:distribution ex:dist-201 ;
  dct:source      ex:not-a-dataset .

ex:not-a-dataset a foaf:Document ;
  foaf:name "Not a dataset"@en .

############################################################
# Invalid 2: LITERAL INSTEAD OF RESOURCE (violates sh:class)
############################################################
ex:dataset-source-literal a dcat:Dataset ;
  dct:identifier  "dataset-202" ;
  dct:title       "Invalid source - literal"@en ;
  dct:description "dct:source is a literal, but must be a dcat:Dataset resource."@en ;
  dct:publisher   ex:publisher-1 ;
  dct:rights      ex:rights-1 ;
  dcat:distribution ex:dist-202 ;
  dct:source      "Some literal source"@en .

############################################################
# Invalid 3: CIRCULAR SELF-REFERENCE (A dct:source A)
############################################################
ex:dataset-source-self-cycle a dcat:Dataset ;
  dct:identifier  "dataset-203" ;
  dct:title       "Invalid source - self cycle"@en ;
  dct:description "Dataset sources itself."@en ;
  dct:publisher   ex:publisher-1 ;
  dct:rights      ex:rights-1 ;
  dcat:distribution ex:dist-203 ;
  dct:source      ex:dataset-source-self-cycle .

############################################################
# Invalid 4: SYMMETRIC CYCLE (caught by your sh:sparql)
# A dct:source B . B dct:source A
############################################################
ex:dataset-source-a a dcat:Dataset ;
  dct:identifier  "dataset-204" ;
  dct:title       "Invalid source - symmetric cycle A"@en ;
  dct:description "A sources B and B sources A."@en ;
  dct:publisher   ex:publisher-1 ;
  dct:rights      ex:rights-1 ;
  dcat:distribution ex:dist-204 ;
  dct:source      ex:dataset-source-b .

ex:dataset-source-b a dcat:Dataset ;
  dct:identifier  "dataset-205" ;
  dct:title       "Invalid source - symmetric cycle B"@en ;
  dct:description "B sources A and A sources B."@en ;
  dct:publisher   ex:publisher-1 ;
  dct:rights      ex:rights-1 ;
  dcat:distribution ex:dist-205 ;
  dct:source      ex:dataset-source-a .

############################################################
# Invalid 5: RESOURCE PRESENT BUT NOT TYPED AS dcat:Dataset
############################################################
ex:dataset-source-missing-type a dcat:Dataset ;
  dct:identifier  "dataset-206" ;
  dct:title       "Invalid source - missing rdf:type"@en ;
  dct:description "dct:source points to a node not typed as dcat:Dataset."@en ;
  dct:publisher   ex:publisher-1 ;
  dct:rights      ex:rights-1 ;
  dcat:distribution ex:dist-206 ;
  dct:source      ex:untyped-node .

# Intentionally NOT a dcat:Dataset
ex:untyped-node dct:title "Untyped node"@en .
